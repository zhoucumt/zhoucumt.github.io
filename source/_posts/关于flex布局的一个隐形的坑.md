---
title: 关于flex布局的一个隐形的坑
date: 2016-09-22 21:10:31
tags:
---
今天在项目开发中，偶然发现一个flex布局的小坑，一直以为flex用法挺简单，没想到在手机上显示却遇到了坑，吓得我赶快写篇博客压压惊。
言归正传。
### 背景：
 今天做的这样一个项目，其中里面的球队对阵信息，需要一个三栏布局，由于是才开始的项目，也没有用到其他什么成熟的样式库，就自然想到了flex布局，在父元素和子元素设置的代码如下：
 
 ``` css
     
     .xxx-parent {
         display: -webkit-flex;
         display: flex;
      }
     .child1,
     .child2,
     .child3 {
         -webkit-flex: 1;
         flex: 1;
         text-align: center;
     }
 
 ```
 
 当然，由于球队可点，是a标签，也将a标签变成了display: block
 
 效果图如下：
 
![image](http://chuantu.biz/t5/35/1474549369x1032300878.png)


于是，就这样愉快的写好了，在电脑里chrome里面也没发现什么问题，直到过了几天，今天把其中一个球队的名称设置成"马刺"，才愕然发现，"已添加"这个按钮，居然没和上面的按钮对齐，向左偏移了一点。当时我就蒙蔽了，感觉世界观受到了颠覆。先上手机上的图：
![image](http://chuantu.biz/t5/35/1474550059x1032300878.png)

相信聪明的你一定可以发现偏移的按钮。
by the way,** 我的手机是5s,ios8.3，一直未升级 **

### 解决过程
第一反应，就是上caniuse去查一下flex，发现ios8.1-4需要加webkit前缀，后来也加了，依然不起作用，手机上测试了safari，微信，uc均还是一样的问题。

** 后来同事过来，也是5s,不过系统已经升级到了最新，发现没这个问题 **

### 解决方案
先省略其中的解决过程吧,解决方法是在子元素里面加上一个width: 1%（后来也测试了，width:1px其实也是可以的）贴出方案：

``` css

    .child1,
    .child2,
    .child3 {
        width: 1%;
        -webkit-flex: 1;
        flex: 1;
        text-align: center;
    }
```
